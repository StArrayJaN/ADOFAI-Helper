plugins {
    id 'java'
    id 'edu.sc.seis.launch4j' version '3.0.6'
}

group = 'thercn.adofai.helper'
version = '1.0-SNAPSHOT'

repositories {
    google()
    mavenCentral()
}

task run(type: JavaExec) {
    mainClass = 'thercn.adofai.helper.Main'
    classpath = sourceSets.main.runtimeClasspath
    systemProperty 'java.library.path', 'binary'
}

jar {
    manifest {
        attributes 'Main-Class': 'thercn.adofai.helper.Main'
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

launch4j {
    mainClassName = 'thercn.adofai.helper.Main'
}

task runJar(type: JavaExec) {
    dependsOn(jar)
    mainClass = 'thercn.adofai.helper.Main' // 替换为你的主类
    classpath = files(jar.archivePath)
}

dependencies {
    implementation 'org.json:json:20231013'
    implementation "com.github.kwhat:jnativehook:+"
    implementation 'io.github.vincenzopalazzo:material-ui-swing:1.1.4'
}
/*

def nativeProject = findProject(":native")

if (nativeProject != null) {
    run.dependsOn ':native:build'

    tasks.findByPath(":assemble").dependsOn ':native:linkDebug'
}
*/

test {
    useJUnitPlatform()
}

